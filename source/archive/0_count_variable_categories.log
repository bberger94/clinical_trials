
  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   14.2   Copyright 1985-2015 StataCorp LP
  Statistics/Data Analysis            StataCorp
                                      4905 Lakeway Drive
     MP - Parallel Edition            College Station, Texas 77845 USA
                                      800-STATA-PC        http://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

18-user 8-core Stata network perpetual license:
       Serial number:  501406201034
         Licensed to:  National Bureau of Economic Research
                       Cambridge, MA 02138

Notes:
      1.  Stata is running in batch mode.
      2.  Unicode is supported; see help unicode_advice.
      3.  More than 2 billion observations are allowed; see help obs_advice.
      4.  Maximum number of variables is set to 5000; see help set_maxvar.


running /disk/admin/Linux-local/stata14/sysprofile.do ...

. do 0_count_variable_categories.do 

. /****************************************************************************
> *******
> File        : 0_count_variable_categories.do
> Authors     : Alice Ndikumana
> Created     : 25 Jul 2016
> Modified    : 26 Jul 2016
> Description : count number of categories for following categorical variables 
> in P2 data:
> patient_segment, primary_interventions, sponsor_only, collaborator_only, acti
> on, active_controls, country, category, design,
> age_race_healthy_volunteers, endpoint_types, endpoint, adverse_events
> 
> *****************************************************************************
> ******/
. 
. do setup.do

. global raw = "../data/raw"

. global interim = "../data/interim"

. global processed = "../data/processed"

. 
end of do-file

. 
. use "$processed/clinical-trials.dta"

. 
. * create a local macro of categorical variables of interest
. local cvs primary_interventions patient_segment endpoints

. 
. * begin for loop through all variables of interest
. foreach var of varlist `cvs' {
  2. 
.     * split observations of
.     keep `var' row_id
  3.     split `var', p(";")
  4.     drop `var'
  5.     reshape long `var', i(row_id) j(counter)
  6. 
.     * cleanse list of biomarkers and save crosswalk
.     keep `var'
  7.     drop if `var'==""
  8.     replace `var'=lower(`var')
  9.     replace `var' = trim(`var')
 10.     duplicates drop
 11. 
.     * count of unique observations
.     count
 12.     codebook `var'
 13.     clear
 14.     use "$processed/clinical-trials.dta"
 15. 
.     * save list of unique observations of variable
.     * save P2_Clinical_Trial_'catvar'_All.dta, replace
. 
. }
variables created as string: primary_i~s1primary_i~s6primary_i~11primary_i~16pr
> imary_i~21
primary_i~s2  primary_i~s7  primary_i~12  primary_i~17  primary_i~22
primary_i~s3  primary_i~s8  primary_i~13  primary_i~18  primary_i~23
primary_i~s4  primary_i~s9  primary_i~14  primary_i~19
primary_i~s5  primary_i~10  primary_i~15  primary_i~20
(note: j = 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23)

Data                               wide   ->   long
-----------------------------------------------------------------------------
Number of obs.                    42591   ->  979593
Number of variables                  24   ->       3
j variable (23 values)                    ->   counter
xij variables:
primary_interventions1 primary_interventions2 ... primary_interventions23->prim
> ary_interventions
-----------------------------------------------------------------------------
(927,076 observations deleted)
(24,535 real changes made)
(10,476 real changes made)

Duplicates in terms of all variables

(30,635 observations deleted)
  21,882

-------------------------------------------------------------------------------
primary_interventions                                               (unlabeled)
-------------------------------------------------------------------------------

                  type:  string (str399), but longest is str398

         unique values:  21,882                   missing "":  0/21,882

              examples:  "cryospray ablation alone"
                         "intraoperative radiotherapy (5 and 20 gy) alone"
                         "qav-680 alone"
                         "variable regimens including azithromycin ,
                         doxycycline , tinidazole"

               warning:  variable has embedded blanks
variables created as string: patient_s~t1patient_s~26patient_s~51patient_s~76pa
> tient_~101
patient_s~t2  patient_s~27  patient_s~52  patient_s~77  patient_~102
patient_s~t3  patient_s~28  patient_s~53  patient_s~78  patient_~103
patient_s~t4  patient_s~29  patient_s~54  patient_s~79  patient_~104
patient_s~t5  patient_s~30  patient_s~55  patient_s~80  patient_~105
patient_s~t6  patient_s~31  patient_s~56  patient_s~81  patient_~106
patient_s~t7  patient_s~32  patient_s~57  patient_s~82  patient_~107
patient_s~t8  patient_s~33  patient_s~58  patient_s~83  patient_~108
patient_s~t9  patient_s~34  patient_s~59  patient_s~84  patient_~109
patient_~t10  patient_s~35  patient_s~60  patient_s~85  patient_~110
patient_~t11  patient_s~36  patient_s~61  patient_s~86  patient_~111
patient_~t12  patient_s~37  patient_s~62  patient_s~87  patient_~112
patient_~t13  patient_s~38  patient_s~63  patient_s~88  patient_~113
patient_~t14  patient_s~39  patient_s~64  patient_s~89  patient_~114
patient_~t15  patient_s~40  patient_s~65  patient_s~90  patient_~115
patient_~t16  patient_s~41  patient_s~66  patient_s~91  patient_~116
patient_~t17  patient_s~42  patient_s~67  patient_s~92  patient_~117
patient_~t18  patient_s~43  patient_s~68  patient_s~93  patient_~118
patient_~t19  patient_s~44  patient_s~69  patient_s~94  patient_~119
patient_~t20  patient_s~45  patient_s~70  patient_s~95  patient_~120
patient_~t21  patient_s~46  patient_s~71  patient_s~96  patient_~121
patient_~t22  patient_s~47  patient_s~72  patient_s~97  patient_~122
patient_~t23  patient_s~48  patient_s~73  patient_s~98  patient_~123
patient_~t24  patient_s~49  patient_s~74  patient_s~99  patient_~124
patient_s~25  patient_s~50  patient_s~75  patient_~100
(note: j = 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26
>  27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 5
> 2 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 
> 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102
>  103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 
> 122 123 124)

Data                               wide   ->   long
-----------------------------------------------------------------------------
Number of obs.                    42591   -> 5.3e+06
Number of variables                 125   ->       3
j variable (124 values)                   ->   counter
xij variables:
patient_segment1 patient_segment2 ... patient_segment124->patient_segment
-----------------------------------------------------------------------------
(5,148,668 observations deleted)
(132,616 real changes made)
(100,262 real changes made)

Duplicates in terms of all variables

(127,443 observations deleted)
  5,173

-------------------------------------------------------------------------------
patient_segment                                                     (unlabeled)
-------------------------------------------------------------------------------

                  type:  string (str176), but longest is str175

         unique values:  5,173                    missing "":  0/5,173

              examples:  "colorectal tumor - subjects with gene variants -
                         ugt1a1_human_mutation"
                         "hypercholesterolemia - subjects
                         refractory/intolerant to lipid lowering therapy -
                         subjects refractory/intolerant to statin therapy"
                         "menopause - subjects with sexual dysfunction"
                         "psoriasis - subjects with history of/scheduled for
                         therapy - subjects with history of/scheduled for
                         systemic therapy"

               warning:  variable has embedded blanks
variables created as string: endpoints1endpoints31endpoints61endpoints91endpoin
> ts121
endpoints2    endpoints32   endpoints62   endpoints92   endpoints122
endpoints3    endpoints33   endpoints63   endpoints93   endpoints123
endpoints4    endpoints34   endpoints64   endpoints94   endpoints124
endpoints5    endpoints35   endpoints65   endpoints95   endpoints125
endpoints6    endpoints36   endpoints66   endpoints96   endpoints126
endpoints7    endpoints37   endpoints67   endpoints97   endpoints127
endpoints8    endpoints38   endpoints68   endpoints98   endpoints128
endpoints9    endpoints39   endpoints69   endpoints99   endpoints129
endpoints10   endpoints40   endpoints70   endpoints100  endpoints130
endpoints11   endpoints41   endpoints71   endpoints101  endpoints131
endpoints12   endpoints42   endpoints72   endpoints102  endpoints132
endpoints13   endpoints43   endpoints73   endpoints103  endpoints133
endpoints14   endpoints44   endpoints74   endpoints104  endpoints134
endpoints15   endpoints45   endpoints75   endpoints105  endpoints135
endpoints16   endpoints46   endpoints76   endpoints106  endpoints136
endpoints17   endpoints47   endpoints77   endpoints107  endpoints137
endpoints18   endpoints48   endpoints78   endpoints108  endpoints138
endpoints19   endpoints49   endpoints79   endpoints109  endpoints139
endpoints20   endpoints50   endpoints80   endpoints110  endpoints140
endpoints21   endpoints51   endpoints81   endpoints111  endpoints141
endpoints22   endpoints52   endpoints82   endpoints112  endpoints142
endpoints23   endpoints53   endpoints83   endpoints113  endpoints143
endpoints24   endpoints54   endpoints84   endpoints114  endpoints144
endpoints25   endpoints55   endpoints85   endpoints115  endpoints145
endpoints26   endpoints56   endpoints86   endpoints116  endpoints146
endpoints27   endpoints57   endpoints87   endpoints117  endpoints147
endpoints28   endpoints58   endpoints88   endpoints118
endpoints29   endpoints59   endpoints89   endpoints119
endpoints30   endpoints60   endpoints90   endpoints120
(note: j = 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26
>  27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 5
> 2 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 
> 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102
>  103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 
> 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 1
> 41 142 143 144 145 146 147)

Data                               wide   ->   long
-----------------------------------------------------------------------------
Number of obs.                    42591   -> 6.3e+06
Number of variables                 148   ->       3
j variable (147 values)                   ->   counter
xij variables:
 endpoints1 endpoints2 ... endpoints147   ->   endpoints
-----------------------------------------------------------------------------
(6,011,144 observations deleted)
(249,733 real changes made)
(216,025 real changes made)

Duplicates in terms of all variables

(232,855 observations deleted)
  16,878

-------------------------------------------------------------------------------
endpoints                                                           (unlabeled)
-------------------------------------------------------------------------------

                  type:  string (str219), but longest is str218

         unique values:  16,878                   missing "":  0/16,878

              examples:  "chronic obstructive pulmonary disease - assessment
                         of forced expiratory volume in one second (fev1) -
                         change from baseline in fev1"
                         "hepatitis d virus infection - assessment of
                         biopsy/cytology/histology - assessment of
                         inflammation"
                         "menopause - patient reported outcomes/quality of
                         life assessments - breast cancer prevention
                         trial(bcpt) symptom checklist"
                         "pregnancy induced hypertension - assessment of
                         hospitalization rates - assessment of duration of
                         hospitalization"

               warning:  variable has embedded blanks

. 
end of do-file
